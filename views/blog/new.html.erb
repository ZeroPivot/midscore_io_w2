  <script src="https://cdn.tiny.cloud/1/rzzngc2l3yjv4zi3457y3qjfv92codj2bb91rnem3fsyl4x3/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
<div style="text-align: center;">
  <div id='entry' style='border:2px black solid; font-size:42px; display: inline-block;'>
<form enctype='application/x-www-form-urlencoded' action=/blog/<%= @user %>/new/?rendered_type=wysiwyg method="POST">
  <fieldset>
    <legend><font size="2">Add a new Blog entry...</font></legend>

    <label for="blog_post_title"><font size="2">Blog Post Title:</font></label>
    <input type="text" id="blog_post_title" name="blog_post_title"><br><br>

    <label for="blog_post_author"><font size="2">Blog Post Author:</font></label>
    <input type="text" id="blog_post_author" name="blog_post_author" value="<%= @user %>"><br><br>

    <label for="blog_post_date"><font size="2">Blog Post Date:</font></label>
    <input type="text" value="<%= TZInfo::Timezone.get('America/Los_Angeles').utc_to_local(Time.now).to_s %>" id="blog_post_date" name="blog_post_date"><br><br>

    <br><label for="blog_post_tags"><font size="2">Blog Tags (comma separated):</font></label><br>
    <textarea id="blog_post_tags" rows="20" cols="30" name="blog_post_tags"></textarea><br><br>
        <input type="hidden" name="rendered_type" id="rendered_type" value="<%= @rendered_type %>">

    <textarea id="blog_post_body" name="blog_post_body" rows="60" cols="100">üñ•Ô∏è...‚å®Ô∏è</textarea>

  </fieldset>
    <input type="submit" value="Generate Blog Entry">
  </form>

      <script>
    tinymce.init({
      selector: '#blog_post_body',
      plugins: 'anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount',
      toolbar: 'undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table mergetags | addcomment showcomments | spellcheckdialog a11ycheck typography | align lineheight | checklist numlist bullist indent outdent | emoticons charmap | removeformat',
      tinycomments_mode: 'embedded',
      tinycomments_author: 'Author name',
      mergetags_list: [
        { value: 'First.Name', title: 'First Name' },
        { value: 'Email', title: 'Email' },
      ]
    });
  </script>
  <center>
  RENDER TYPE: *WYSIWYG* | <a href="/blog/<%= @user %>/new/?rendered_type=markdown">MARKDOWN</a> | <a href="/blog/<%= @user %>/new/?rendered_type=html">HTML</a>
  (WARNING: switching via clicking will erase all content in the editor!!!)
</center>
<% data = @@line_db[@user].pad["blog_database", "blog_table"].data_arr %>
<%# data = @@line_db["blog"].pad["blog_database", "blog_table"].data_arr if !db_exists%>

<%#= data %>

</div>
</div>

<%# url_data = @@line_db["urls_redir"].pad["urls_database", "urls_table"].get(0) %>

<%# generate a html form based on the @params data: %>
