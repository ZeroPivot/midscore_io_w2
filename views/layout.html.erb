<!DOCTYPE html>
<html>
<head>
    <%= assets(:css) %>
    <link rel="shortcut icon" type="image/x-icon" href="<%= domain_name(@r) %>/favicon.ico">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta property="og:title" content="<%= @title %> - by <%= @user %>">
    <meta property="og:image" content="<%= domain_name(@r) %>/card_banner.jpg">
    <meta property="og:url" content="<%= domain_name(@r) %>/blog/<%= @user %>/view/<%= @id %>">
    <meta property="og:site_name" content="<%= domain_name(@r) %>">
    <meta property="og:type" content="object">
    <meta property="og:image:width" content="500"><!-- added 2021-04-07 -->
    <meta property="og:image:height" content="500"> <!-- added 2021-04-07 -->
    <meta name="description" content="Post By <%= @user || domain_name(@r) %>">
    <meta name="keywords" content="demiurge, simulation, simulator, sim, second life, stinky, stimky, stinky.zip, stimky.zip onemoondogg, pornography, porn, pron, pr0n, furry porn, vore, cock vore, anal vore, galleries, deviantart, furaffinity, midscore, mid, mids, midscorian, wolf, one moon planet, onemoonplane, blog,  gamedev, gamedevelopment, indiegamedev, game, api, anthro, anthropomorphic, dragon, dragons, furry, furries, comic, comics, web, webcomic, dreamsigns, addictions, earth, planets, war, science, sciencefiction, wolf, wolves, lynx, fennec, fox, foxes, gallery, anthro, anthropomorphic, commission, commissions, actors, manedwolf, maned_wolf, canines, canids, fennecfox, future, german shepherd, axelshep, aylocollie, furryfurry, nsfw, gay, homosexual, faggotry, market, commissions, algorithm, simulator earth, simulation, role playing game, rpg, actors: simulator, actors: simula, simula, programming, coding, computer science rockstars, comp sci rockstars, computer science, computer information systems, mathematics, calculus, physics, furry artist, artist, canid, canines, role playing game, role-playing game, blog, journal, cdn, api, gallery, furry blog, furry gallery, emojis, emoji, collie, german shepherd, gshep, g-shep, hyena, yeen, striped hyena, aardwolf, spotted hyena, mathematics, discrete mathematics, phd, gaymer, furfag, furfaggotry, nsfl, flcl, anime, style, art style, artistry, digital art, zoophile hunters, pedophile hunters, bigot hunters, trans hunters, trans exposers, bigot exposers, pedophile exposers, democrat, republican, cenrist, democrat lol, sexy, signup, mega-game.net, meta game, meta, metaworld, furfaggotry, blogger, blog, gnosis, gnostic, gnocticism, ai, artificlal intelligence, service, blogger, gallery, furry gallery, furry bloggers, furry blogger, gay, homosexual, queer, twin flames, rhuxwolf, aylowolf, rhuxfolf, aylofolf, metagame, game, gaming, games, video games, software, hardware">
    <meta name="author" content="OneMoonDogg">
    <meta property="og:image" content="<%= domain_name(@r) %>/card_banner.jpg">
    <meta name="twitter:card" content="summary_large_image"> <!-- changed 2021-04-15 -->
    <meta name="twitter:site" content="@TheFieldTester">
    <meta name="twitter:title" content="<%= @title %>">
    <meta name="twitter:description" content="<%=h @description || @title || @user %>" />
    <title><%= @title %></title>
  </head>
  <body>
<div class="gcse-search"></div>
  <style>
    .day { border: 1px solid black; padding: 10px; display: inline-block; width: 40px; text-align: center; }
    .week { clear: both; }
  </style>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8121079063235245"
     crossorigin="anonymous"></script>
  <div>
  <center>
  <br>
  <a href="<%= domain_name(@r) %>/blog/<%= @user %>">
    <div style="font-size: 72px; overflow-wrap: break-word;">
      1ï¸âƒ£ğŸŒ“ğŸŒ
    </div>
  </a>
  <font size="16"><a href="<%= domain_name(@r) %>/blog">(ğŸ“ƒ)</a>,<a href="<%= domain_name(@r) %>/gallery">(ğŸ–¼ï¸)</a></font><br><br>
  <font size="3"><%= "Gregorian: #{Calendar.new.gregorian}" %><font><br>
  <font size="3"><%= "Julian: #{Calendar.new.julian_primitive} -> #{Calendar.new.julian}" %></font><br>
  <font size="16"><%= MoonIllumination.emoji %></font><br>
  <font size="3"><%= MoonIllumination.phase_name %></font><br>
  <font size="3">Moon Age -> (<%= MoonIllumination.age %>)</font><br>
  <b>120</b>ğŸ•°ï¸<%= convert_to_120_second_time_pst  %> PST
  <hr>
 <br>
  <% if session['user'] %>
   <h1>(ğŸ‘¤[<a href="/gallery/upload">(ğŸ”¢)</a>; <a href="/gallery/upload/url">(ğŸ”—ğŸ”¢)</a>;  <a href="/blog/<%= session['user'] %>/new">(ğŸ“)</a>|<a href="/gallery/view/<%= session['user'] %>">(ğŸ–¼ï¸)</a>],[<a href="/blog/<%= session['user'] %>">(ğŸ“ƒ)</a>]) <a href="/gallery/view/<%= session['user'] %>"><%= session['user'] %></a></h1><br>
  <% end %>
  <br>
  </center>
  </div>
  <br>
    <%= yield %>
    <%= assets(:js) %>
  </body>
  <center>
  <hr>
  <font face="consolas">
  <% stop_rendering_time = Time.now.to_f %>
  <b></b> <%= ((stop_rendering_time - @start_rendering_time.to_f)).round(5) %>s [<%= ((stop_rendering_time - @start_rendering_time.to_f)*1000).round(5) %>ms]<br><br>
<% if !@page_views %>
  <% File.open("/home/midscore_io/views/page_views.txt", "r+") do |file| %>
    <% @page_views = file.read.to_i %>
    <% @page_views += 1 %>
    <% file.rewind %>
    <% file.write(@page_views) %>
  <% end unless LOCAL %>
<% end %>
<% if LOCAL %>
   <% File.open("views/page_views_local.txt", "r+") do |file| %>
    <% @page_views = file.read.to_i %>
    <% @page_views += 1 %>
    <% file.rewind %>
    <% file.write(@page_views) %>
  <% end %>
  <% end %>
<br>
â™¾ï¸<%= @page_views.to_s.reverse.gsub(/(\d{3})(?=\d)/, '\\1,').reverse %> -- Â©ï¸<a href="<%= domain_name(@r) %>"><%= domain_name(@r).gsub(/https?:\/\//, '') %></a> -- <%= $dog_blog_version %><br>
<br>
<br>
<br>
<center><font size="3"><div size="5" id="ip_addr_resolv">ğŸ˜ï¸<b>[ğŸŒ<%= request.ip %>]</b></div></font></center>
<br>
<a href="<%= domain_name(@r) %>/blog/login">[â•ğŸ”’]</a>|<a href="<%= domain_name(@r) %>/blog/logout">[â–ğŸ”’]</a><br>
</center>
</html>

<% if @r %>
<%
 @hitch_cookie = @r.params['h']
      @hitch_cookie = '' if @hitch_cookie.nil?
      FileUtils.touch('./hitches.txt')
      File.open('./hitches.txt', 'a') { |f| f.puts("#{Time.now.to_s} - #{@hitch_cookie}\n") }

      %>
<% File.open('main_request_log.txt', 'a') do |f| %>

     <%
      # Log the request method
      f.puts "request_method: #{@r.request_method}"

      # Log the host
      f.puts "host: #{@r.host}"

      f.puts "ip: #{@r.ip}"

      # Log the path
      f.puts "path: #{@r.path}"

      # Log the GET parameters
      f.puts "GET_params: #{@r.GET}"

      # Log the POST parameters
      f.puts "POST_params: #{@r.POST}"
      begin
        hostname = Resolv.getname(@r.ip)
        f.puts "hostname: #{hostname}"
      rescue Resolv::ResolvError
        f.puts "hostname: unknown"
      end
      f.puts "AJAX request? #{@r.xhr?}"
      f.puts "cookies: #{@r.cookies}"
      f.puts "REFERRER: #{@r.referrer}"
      f.puts "timestamp: #{TZInfo::Timezone.get('America/Los_Angeles').utc_to_local(Time.now)}"

      # Log the cookies

      f.puts #newline
      # ... add more logs as needed ...
      %>
    <% end %>
    <% end %>
